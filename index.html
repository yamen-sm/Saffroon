<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Saffroon Kitchen | ŸÖÿ∑ÿ®ÿÆ ÿ≤ÿπŸÅÿ±ŸàŸÜ</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&family=DM+Sans:wght@400;500;600;700&family=Noto+Kufi+Arabic:wght@400;600;700;900&display=swap" rel="stylesheet">
<style>
  :root {
    --bg-primary: #0f0f0f;
    --bg-card: #1a1a1a;
    --bg-card-hover: #222222;
    --accent: #e8a849;
    --accent-glow: #e8a84933;
    --accent-dark: #c48a2a;
    --text-primary: #f0ece4;
    --text-secondary: #9a958b;
    --text-muted: #5a5650;
    --success: #4ecb71;
    --danger: #e85454;
    --border: #2a2a2a;
    --radius: 16px;
    --radius-sm: 10px;
    --font-display: 'Playfair Display', serif;
    --font-body: 'DM Sans', sans-serif;
    --font-arabic: 'Noto Kufi Arabic', sans-serif;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: var(--font-body);
    background: var(--bg-primary);
    color: var(--text-primary);
    min-height: 100vh;
    overflow-x: hidden;
    transition: direction 0.3s;
  }

  [dir="rtl"] body, [dir="rtl"] * {
    font-family: var(--font-arabic);
  }
  [dir="rtl"] .brand, [dir="rtl"] .section-title {
    font-family: var(--font-arabic);
  }

  /* ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ */
  header {
    position: fixed; top: 0; left: 0; right: 0; z-index: 100;
    background: rgba(15,15,15,0.85);
    backdrop-filter: blur(20px);
    border-bottom: 1px solid var(--border);
    padding: 0 24px;
    height: 72px;
    display: flex; align-items: center; justify-content: space-between;
  }

  .brand {
    font-family: var(--font-display);
    font-size: 1.6rem;
    font-weight: 900;
    color: var(--accent);
    letter-spacing: -0.02em;
  }

  .header-actions { display: flex; align-items: center; gap: 12px; }

  .lang-toggle {
    background: var(--bg-card);
    border: 1px solid var(--border);
    color: var(--text-primary);
    padding: 8px 16px;
    border-radius: 50px;
    cursor: pointer;
    font-size: 0.85rem;
    font-weight: 600;
    transition: all 0.2s;
    font-family: var(--font-body);
  }
  .lang-toggle:hover { border-color: var(--accent); color: var(--accent); }

  .cart-btn {
    position: relative;
    background: var(--accent);
    color: var(--bg-primary);
    border: none;
    width: 44px; height: 44px;
    border-radius: 50%;
    cursor: pointer;
    font-size: 1.2rem;
    display: flex; align-items: center; justify-content: center;
    transition: all 0.2s;
  }
  .cart-btn:hover { transform: scale(1.1); box-shadow: 0 0 20px var(--accent-glow); }

  .cart-badge {
    position: absolute; top: -4px; right: -4px;
    background: var(--danger);
    color: white;
    width: 20px; height: 20px;
    border-radius: 50%;
    font-size: 0.7rem;
    font-weight: 700;
    display: flex; align-items: center; justify-content: center;
    transition: transform 0.3s cubic-bezier(0.34,1.56,0.64,1);
  }
  .cart-badge.bump { transform: scale(1.4); }

  /* ‚îÄ‚îÄ HERO ‚îÄ‚îÄ */
  .hero {
    padding: 120px 24px 60px;
    text-align: center;
    position: relative;
    overflow: hidden;
  }
  .hero::before {
    content: '';
    position: absolute; inset: 0;
    background: radial-gradient(ellipse at 50% 0%, var(--accent-glow) 0%, transparent 60%);
    pointer-events: none;
  }
  .hero h1 {
    font-family: var(--font-display);
    font-size: clamp(2.4rem, 6vw, 4rem);
    font-weight: 900;
    line-height: 1.1;
    margin-bottom: 16px;
    color: var(--text-primary);
  }
  [dir="rtl"] .hero h1 { font-family: var(--font-arabic); }
  .hero p {
    font-size: 1.1rem;
    color: var(--text-secondary);
    max-width: 480px;
    margin: 0 auto;
    line-height: 1.6;
  }

  /* ‚îÄ‚îÄ MENU SECTION ‚îÄ‚îÄ */
  .menu-section { padding: 20px 24px 40px; max-width: 900px; margin: 0 auto; }

  .section-title {
    font-family: var(--font-display);
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 24px;
    padding-bottom: 12px;
    border-bottom: 2px solid var(--accent);
    display: inline-block;
    color: var(--accent);
  }

  .category-block { margin-bottom: 48px; }

  .menu-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
    gap: 16px;
  }

  /* ‚îÄ‚îÄ MENU CARD ‚îÄ‚îÄ */
  .menu-card {
    background: var(--bg-card);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 20px;
    cursor: pointer;
    transition: all 0.25s ease;
    position: relative;
    overflow: hidden;
    user-select: none;
  }
  .menu-card:hover {
    background: var(--bg-card-hover);
    border-color: var(--accent);
    transform: translateY(-2px);
    box-shadow: 0 8px 30px rgba(0,0,0,0.3);
  }
  .menu-card.in-cart {
    border-color: var(--accent);
    background: linear-gradient(135deg, var(--bg-card) 0%, rgba(232,168,73,0.08) 100%);
  }

  .card-name {
    font-weight: 700;
    font-size: 1.05rem;
    margin-bottom: 4px;
    color: var(--text-primary);
  }

  .card-desc {
    font-size: 0.82rem;
    color: var(--text-secondary);
    line-height: 1.5;
    margin-bottom: 12px;
  }

  .card-bottom {
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  .card-price {
    font-weight: 700;
    font-size: 1.1rem;
    color: var(--accent);
  }

  .card-qty {
    display: flex;
    align-items: center;
    gap: 10px;
    opacity: 0;
    transform: translateY(6px);
    transition: all 0.25s;
    pointer-events: none;
  }
  .menu-card.in-cart .card-qty {
    opacity: 1;
    transform: translateY(0);
    pointer-events: all;
  }

  .qty-btn {
    width: 32px; height: 32px;
    border-radius: 50%;
    border: 1px solid var(--border);
    background: var(--bg-primary);
    color: var(--text-primary);
    font-size: 1rem;
    cursor: pointer;
    display: flex; align-items: center; justify-content: center;
    transition: all 0.15s;
  }
  .qty-btn:hover { border-color: var(--accent); color: var(--accent); }

  .qty-num {
    font-weight: 700;
    font-size: 1rem;
    min-width: 20px;
    text-align: center;
  }

  .add-tag {
    background: var(--accent);
    color: var(--bg-primary);
    padding: 6px 14px;
    border-radius: 50px;
    font-size: 0.78rem;
    font-weight: 700;
    transition: all 0.25s;
  }
  .menu-card.in-cart .add-tag { display: none; }

  /* ‚îÄ‚îÄ CART DRAWER ‚îÄ‚îÄ */
  .drawer-overlay {
    position: fixed; inset: 0; z-index: 200;
    background: rgba(0,0,0,0.6);
    backdrop-filter: blur(4px);
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s;
  }
  .drawer-overlay.open { opacity: 1; pointer-events: all; }

  .drawer {
    position: fixed; top: 0; bottom: 0; right: 0; z-index: 201;
    width: min(420px, 90vw);
    background: var(--bg-primary);
    border-left: 1px solid var(--border);
    transform: translateX(100%);
    transition: transform 0.35s cubic-bezier(0.32, 0.72, 0, 1);
    display: flex; flex-direction: column;
  }
  [dir="rtl"] .drawer {
    right: auto; left: 0;
    border-left: none;
    border-right: 1px solid var(--border);
    transform: translateX(-100%);
  }
  .drawer.open { transform: translateX(0); }

  .drawer-header {
    padding: 24px;
    border-bottom: 1px solid var(--border);
    display: flex; align-items: center; justify-content: space-between;
  }
  .drawer-header h2 {
    font-family: var(--font-display);
    font-size: 1.3rem;
    font-weight: 700;
  }
  [dir="rtl"] .drawer-header h2 { font-family: var(--font-arabic); }

  .close-btn {
    background: none; border: none;
    color: var(--text-secondary);
    font-size: 1.5rem;
    cursor: pointer;
    transition: color 0.2s;
  }
  .close-btn:hover { color: var(--text-primary); }

  .drawer-body {
    flex: 1; overflow-y: auto; padding: 24px;
  }

  .drawer-empty {
    text-align: center;
    padding: 60px 20px;
    color: var(--text-muted);
    font-size: 0.95rem;
  }
  .drawer-empty span { font-size: 3rem; display: block; margin-bottom: 16px; }

  .cart-item {
    display: flex; align-items: center; gap: 14px;
    padding: 14px 0;
    border-bottom: 1px solid var(--border);
    animation: slideIn 0.3s ease;
  }
  @keyframes slideIn {
    from { opacity: 0; transform: translateX(20px); }
    to { opacity: 1; transform: translateX(0); }
  }

  .cart-item-info { flex: 1; }
  .cart-item-name { font-weight: 600; font-size: 0.95rem; }
  .cart-item-price { font-size: 0.85rem; color: var(--accent); margin-top: 2px; }

  .cart-item-qty {
    display: flex; align-items: center; gap: 8px;
  }

  .cart-item-remove {
    background: none; border: none;
    color: var(--text-muted);
    cursor: pointer;
    font-size: 1.1rem;
    padding: 4px;
    transition: color 0.2s;
  }
  .cart-item-remove:hover { color: var(--danger); }

  .drawer-footer {
    padding: 24px;
    border-top: 1px solid var(--border);
  }

  .total-row {
    display: flex; justify-content: space-between;
    margin-bottom: 20px;
    font-size: 1.15rem;
    font-weight: 700;
  }
  .total-row span:last-child { color: var(--accent); }

  .whatsapp-btn {
    width: 100%;
    padding: 16px;
    background: #25D366;
    color: white;
    border: none;
    border-radius: var(--radius-sm);
    font-size: 1.05rem;
    font-weight: 700;
    cursor: pointer;
    display: flex; align-items: center; justify-content: center; gap: 10px;
    transition: all 0.2s;
    font-family: var(--font-body);
  }
  [dir="rtl"] .whatsapp-btn { font-family: var(--font-arabic); }
  .whatsapp-btn:hover { background: #1fb855; transform: translateY(-1px); box-shadow: 0 6px 20px rgba(37,211,102,0.3); }
  .whatsapp-btn:disabled { opacity: 0.4; cursor: not-allowed; transform: none; box-shadow: none; }

  .whatsapp-btn svg {
    width: 22px; height: 22px; fill: white;
  }

  /* ‚îÄ‚îÄ TOAST ‚îÄ‚îÄ */
  .toast {
    position: fixed;
    bottom: 30px;
    left: 50%;
    transform: translateX(-50%) translateY(80px);
    background: var(--bg-card);
    border: 1px solid var(--accent);
    color: var(--text-primary);
    padding: 12px 24px;
    border-radius: 50px;
    font-size: 0.9rem;
    font-weight: 600;
    z-index: 300;
    opacity: 0;
    transition: all 0.4s cubic-bezier(0.34,1.56,0.64,1);
    pointer-events: none;
  }
  .toast.show {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }

  /* ‚îÄ‚îÄ RESPONSIVE ‚îÄ‚îÄ */
  @media (max-width: 600px) {
    .menu-grid { grid-template-columns: 1fr; }
    .hero h1 { font-size: 2rem; }
  }

  /* ‚îÄ‚îÄ SCROLLBAR ‚îÄ‚îÄ */
  ::-webkit-scrollbar { width: 6px; }
  ::-webkit-scrollbar-track { background: transparent; }
  ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
</style>
</head>
<body>

<header>
  <div class="brand" id="brandName">Saffroon Kitchen</div>
  <div class="header-actions">
    <button class="lang-toggle" id="langBtn" onclick="toggleLang()">ÿπÿ±ÿ®Ÿä</button>
    <button class="cart-btn" id="cartBtn" onclick="openDrawer()">
      üõí
      <span class="cart-badge" id="cartBadge" style="display:none">0</span>
    </button>
  </div>
</header>

<section class="hero">
  <h1 id="heroTitle">Flavours That Tell a Story</h1>
  <p id="heroSub">Handcrafted dishes inspired by the spice routes. Pick your favourites and order straight to our kitchen via WhatsApp.</p>
</section>

<main class="menu-section" id="menuSection"></main>

<!-- Cart Drawer -->
<div class="drawer-overlay" id="drawerOverlay" onclick="closeDrawer()"></div>
<div class="drawer" id="drawer">
  <div class="drawer-header">
    <h2 id="drawerTitle">Your Order</h2>
    <button class="close-btn" onclick="closeDrawer()">‚úï</button>
  </div>
  <div class="drawer-body" id="drawerBody"></div>
  <div class="drawer-footer">
    <div class="total-row">
      <span id="totalLabel">Total</span>
      <span id="totalValue">0 AED</span>
    </div>
    <button class="whatsapp-btn" id="sendBtn" onclick="sendToWhatsApp()" disabled>
      <svg viewBox="0 0 24 24"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg>
      <span id="sendBtnText">Send Order via WhatsApp</span>
    </button>
  </div>
</div>

<div class="toast" id="toast"></div>

<script>
// ‚îÄ‚îÄ MENU DATA ‚îÄ‚îÄ
const menu = {
  starters: {
    en: "Starters",
    ar: "ÿßŸÑŸÖŸÇÿ®ŸÑÿßÿ™",
    items: [
      { id: "s1", en: "Lentil Soup", ar: "ÿ¥Ÿàÿ±ÿ®ÿ© ÿπÿØÿ≥", descEn: "Warm spiced red lentil soup with crispy croutons", descAr: "ÿ¥Ÿàÿ±ÿ®ÿ© ÿπÿØÿ≥ ÿ£ÿ≠ŸÖÿ± ÿ®ÿßŸÑÿ®Ÿáÿßÿ±ÿßÿ™ ŸÖÿπ ÿÆÿ®ÿ≤ ŸÖÿ≠ŸÖŸëÿµ", price: 22 },
      { id: "s2", en: "Falafel Plate", ar: "ÿ∑ÿ®ŸÇ ŸÅŸÑÿßŸÅŸÑ", descEn: "Crispy chickpea falafel with tahini & pickles", descAr: "ŸÅŸÑÿßŸÅŸÑ ŸÖŸÇÿ±ŸÖÿ¥ÿ© ŸÖÿπ ÿ∑ÿ≠ŸäŸÜÿ© ŸàŸÖÿÆŸÑŸÑÿßÿ™", price: 28 },
      { id: "s3", en: "Fattoush Salad", ar: "ÿ≥ŸÑÿ∑ÿ© ŸÅÿ™Ÿàÿ¥", descEn: "Fresh greens with pomegranate & sumac dressing", descAr: "ÿÆÿ∂ÿ±Ÿàÿßÿ™ ÿ∑ÿßÿ≤ÿ¨ÿ© ŸÖÿπ ÿØÿ®ÿ≥ ÿßŸÑÿ±ŸÖÿßŸÜ ŸàÿßŸÑÿ≥ŸÖÿßŸÇ", price: 26 },
      { id: "s4", en: "Hummus Trio", ar: "ÿ≠ŸÖÿµ ÿ´ŸÑÿßÿ´Ÿä", descEn: "Classic, roasted pepper & garlic hummus", descAr: "ÿ≠ŸÖÿµ ŸÉŸÑÿßÿ≥ŸäŸÉŸä Ÿàÿ®ÿßŸÑŸÅŸÑŸÅŸÑ ÿßŸÑŸÖÿ¥ŸàŸä ŸàÿßŸÑÿ´ŸàŸÖ", price: 30 },
    ]
  },
  mains: {
    en: "Main Courses",
    ar: "ÿßŸÑÿ£ÿ∑ÿ®ÿßŸÇ ÿßŸÑÿ±ÿ¶Ÿäÿ≥Ÿäÿ©",
    items: [
      { id: "m1", en: "Lamb Ouzi", ar: "ŸÑÿ≠ŸÖ ÿ£Ÿàÿ≤Ÿä", descEn: "Slow-roasted lamb shoulder with saffron rice", descAr: "ŸÉÿ™ŸÅ ÿÆÿ±ŸàŸÅ ŸÖÿ¥ŸàŸä ÿ®ÿ®ÿ∑ÿ° ŸÖÿπ ÿ£ÿ±ÿ≤ ÿ®ÿßŸÑÿ≤ÿπŸÅÿ±ÿßŸÜ", price: 75 },
      { id: "m2", en: "Grilled Hammour", ar: "ŸáÿßŸÖŸàÿ± ŸÖÿ¥ŸàŸä", descEn: "Local hammour fillet with herb butter", descAr: "ŸÅŸäŸÑŸäŸá ŸáÿßŸÖŸàÿ± ŸÖÿ≠ŸÑŸä ÿ®ÿßŸÑÿ≤ÿ®ÿØÿ© ŸàÿßŸÑÿ£ÿπÿ¥ÿßÿ®", price: 68 },
      { id: "m3", en: "Chicken Shawarma", ar: "ÿ¥ÿßŸàÿ±ŸÖÿß ÿØÿ¨ÿßÿ¨", descEn: "Marinated chicken with garlic sauce & pickles", descAr: "ÿØÿ¨ÿßÿ¨ ŸÖÿ™ÿ®ŸÑ ŸÖÿπ ÿµŸàÿµ ÿßŸÑÿ´ŸàŸÖ ŸàÿßŸÑŸÖÿÆŸÑŸÑÿßÿ™", price: 42 },
      { id: "m4", en: "Mixed Grill", ar: "ŸÖÿ¥ÿßŸàŸä ŸÖÿ¥ŸÉŸÑÿ©", descEn: "Kebab, kofta, shish tawook & grilled veggies", descAr: "ŸÉÿ®ÿßÿ® ŸàŸÉŸÅÿ™ÿ© Ÿàÿ¥Ÿäÿ¥ ÿ∑ÿßŸàŸàŸÇ ŸàÿÆÿ∂ÿßÿ± ŸÖÿ¥ŸàŸäÿ©", price: 85 },
      { id: "m5", en: "Butter Chicken", ar: "ÿØÿ¨ÿßÿ¨ ÿ®ÿßŸÑÿ≤ÿ®ÿØÿ©", descEn: "Creamy tomato-based curry with basmati rice", descAr: "ŸÉÿßÿ±Ÿä ÿ®ÿßŸÑÿ∑ŸÖÿßÿ∑ŸÖ ÿßŸÑŸÉÿ±ŸäŸÖŸä ŸÖÿπ ÿ£ÿ±ÿ≤ ÿ®ÿ≥ŸÖÿ™Ÿä", price: 52 },
    ]
  },
  drinks: {
    en: "Drinks",
    ar: "ÿßŸÑŸÖÿ¥ÿ±Ÿàÿ®ÿßÿ™",
    items: [
      { id: "d1", en: "Fresh Orange Juice", ar: "ÿπÿµŸäÿ± ÿ®ÿ±ÿ™ŸÇÿßŸÑ ÿ∑ÿßÿ≤ÿ¨", descEn: "Freshly squeezed, no sugar added", descAr: "ÿπÿµŸäÿ± ÿ∑ÿßÿ≤ÿ¨ ÿ®ÿØŸàŸÜ ÿ≥ŸÉÿ± ŸÖÿ∂ÿßŸÅ", price: 18 },
      { id: "d2", en: "Moroccan Mint Tea", ar: "ÿ¥ÿßŸä ŸÖÿ∫ÿ±ÿ®Ÿä ÿ®ÿßŸÑŸÜÿπŸÜÿßÿπ", descEn: "Sweet green tea with fresh mint leaves", descAr: "ÿ¥ÿßŸä ÿ£ÿÆÿ∂ÿ± ÿ≠ŸÑŸà ÿ®ÿ£Ÿàÿ±ÿßŸÇ ÿßŸÑŸÜÿπŸÜÿßÿπ ÿßŸÑÿ∑ÿßÿ≤ÿ¨ÿ©", price: 14 },
      { id: "d3", en: "Mango Lassi", ar: "ŸÑÿ≥Ÿä ŸÖÿßŸÜÿ¨Ÿà", descEn: "Creamy yogurt mango smoothie", descAr: "ÿ≥ŸÖŸàÿ∞Ÿä ŸÖÿßŸÜÿ¨Ÿà ÿ®ÿßŸÑŸÑÿ®ŸÜ ÿßŸÑŸÉÿ±ŸäŸÖŸä", price: 20 },
      { id: "d4", en: "Lemon Mint Cooler", ar: "ŸÑŸäŸÖŸàŸÜ ÿ®ÿßŸÑŸÜÿπŸÜÿßÿπ", descEn: "Iced lemon with crushed mint & soda", descAr: "ŸÑŸäŸÖŸàŸÜ ŸÖÿ´ŸÑÿ¨ ŸÖÿπ ŸÜÿπŸÜÿßÿπ ŸÖŸáÿ±Ÿàÿ≥ ŸàÿµŸàÿØÿß", price: 16 },
    ]
  },
  desserts: {
    en: "Desserts",
    ar: "ÿßŸÑÿ≠ŸÑŸàŸäÿßÿ™",
    items: [
      { id: "x1", en: "Kunafa", ar: "ŸÉŸÜÿßŸÅÿ©", descEn: "Crispy shredded pastry with cheese & syrup", descAr: "ŸÉŸÜÿßŸÅÿ© ŸÖŸÇÿ±ŸÖÿ¥ÿ© ÿ®ÿßŸÑÿ¨ÿ®ŸÜÿ© ŸàÿßŸÑŸÇÿ∑ÿ±", price: 32 },
      { id: "x2", en: "Pistachio Baklava", ar: "ÿ®ŸÇŸÑÿßŸàÿ© ŸÅÿ≥ÿ™ŸÇ", descEn: "Layers of filo, pistachio & rosewater syrup", descAr: "ÿ∑ÿ®ŸÇÿßÿ™ ŸÅŸäŸÑŸà ÿ®ÿßŸÑŸÅÿ≥ÿ™ŸÇ Ÿàÿ¥ÿ±ÿßÿ® ŸÖÿßÿ° ÿßŸÑŸàÿ±ÿØ", price: 28 },
      { id: "x3", en: "Saffron Ice Cream", ar: "ÿ¢Ÿäÿ≥ ŸÉÿ±ŸäŸÖ ÿ≤ÿπŸÅÿ±ÿßŸÜ", descEn: "House-made saffron & cardamom gelato", descAr: "ÿ¨ŸäŸÑÿßÿ™Ÿà ÿ≤ÿπŸÅÿ±ÿßŸÜ ŸàŸáŸäŸÑ ŸÖŸÜÿ≤ŸÑŸä ÿßŸÑÿµŸÜÿπ", price: 24 },
    ]
  }
};

// ‚îÄ‚îÄ STATE ‚îÄ‚îÄ
let lang = "en";
let cart = {}; // { itemId: quantity }

const WHATSAPP_NUMBER = "5511952136848";

// ‚îÄ‚îÄ i18n ‚îÄ‚îÄ
const t = {
  brand:      { en: "Saffroon Kitchen", ar: "ŸÖÿ∑ÿ®ÿÆ ÿ≤ÿπŸÅÿ±ŸàŸÜ" },
  heroTitle:  { en: "Flavours That Tell a Story", ar: "ŸÜŸÉŸáÿßÿ™ ÿ™ÿ≠ŸÉŸä ŸÇÿµÿ©" },
  heroSub:    { en: "Handcrafted dishes inspired by the spice routes. Pick your favourites and order straight to our kitchen via WhatsApp.",
                ar: "ÿ£ÿ∑ÿ®ÿßŸÇ ŸÖÿµŸÜŸàÿπÿ© ÿ®ÿπŸÜÿßŸäÿ© ŸÖÿ≥ÿ™Ÿàÿ≠ÿßÿ© ŸÖŸÜ ÿ∑ÿ±ŸÇ ÿßŸÑÿ™Ÿàÿßÿ®ŸÑ. ÿßÿÆÿ™ÿ± ÿ£ÿ∑ÿ®ÿßŸÇŸÉ ÿßŸÑŸÖŸÅÿ∂ŸÑÿ© Ÿàÿßÿ∑ŸÑÿ® ŸÖÿ®ÿßÿ¥ÿ±ÿ© ÿπÿ®ÿ± Ÿàÿßÿ™ÿ≥ÿßÿ®." },
  drawerTitle:{ en: "Your Order", ar: "ÿ∑ŸÑÿ®ŸÉ" },
  totalLabel: { en: "Total", ar: "ÿßŸÑŸÖÿ¨ŸÖŸàÿπ" },
  sendBtn:    { en: "Send Order via WhatsApp", ar: "ÿ£ÿ±ÿ≥ŸÑ ÿßŸÑÿ∑ŸÑÿ® ÿπÿ®ÿ± Ÿàÿßÿ™ÿ≥ÿßÿ®" },
  emptyCart:  { en: "Your basket is empty", ar: "ÿ≥ŸÑÿ™ŸÉ ŸÅÿßÿ±ÿ∫ÿ©" },
  addText:    { en: "Add", ar: "ÿ£ÿ∂ŸÅ" },
  added:      { en: "Added to your order!", ar: "ÿ™ŸÖÿ™ ÿßŸÑÿ•ÿ∂ÿßŸÅÿ© ŸÑÿ∑ŸÑÿ®ŸÉ!" },
  removed:    { en: "Removed from order", ar: "ÿ™ŸÖ ÿßŸÑÿ≠ÿ∞ŸÅ ŸÖŸÜ ÿßŸÑÿ∑ŸÑÿ®" },
  langToggle: { en: "ÿπÿ±ÿ®Ÿä", ar: "English" },
  currency:   { en: "AED", ar: "ÿØ.ÿ•" },
};

// ‚îÄ‚îÄ RENDER MENU ‚îÄ‚îÄ
function renderMenu() {
  const section = document.getElementById("menuSection");
  section.innerHTML = "";

  for (const [catKey, cat] of Object.entries(menu)) {
    const block = document.createElement("div");
    block.className = "category-block";

    const title = document.createElement("div");
    title.className = "section-title";
    title.textContent = lang === "en" ? cat.en : cat.ar;
    block.appendChild(title);

    const grid = document.createElement("div");
    grid.className = "menu-grid";

    for (const item of cat.items) {
      const qty = cart[item.id] || 0;
      const inCart = qty > 0;

      const card = document.createElement("div");
      card.className = "menu-card" + (inCart ? " in-cart" : "");
      card.onclick = (e) => {
        if (!e.target.closest('.qty-btn')) addItem(item.id);
      };

      card.innerHTML = `
        <div class="card-name">${lang === "en" ? item.en : item.ar}</div>
        <div class="card-desc">${lang === "en" ? item.descEn : item.descAr}</div>
        <div class="card-bottom">
          <span class="card-price">${item.price} ${t.currency[lang]}</span>
          <div class="card-qty">
            <button class="qty-btn" onclick="event.stopPropagation(); decreaseItem('${item.id}')">‚àí</button>
            <span class="qty-num">${qty}</span>
            <button class="qty-btn" onclick="event.stopPropagation(); increaseItem('${item.id}')">+</button>
          </div>
          <span class="add-tag">${t.addText[lang]}</span>
        </div>
      `;
      grid.appendChild(card);
    }
    block.appendChild(grid);
    section.appendChild(block);
  }
}

// ‚îÄ‚îÄ CART LOGIC ‚îÄ‚îÄ
function getAllItems() {
  const all = [];
  for (const cat of Object.values(menu)) {
    all.push(...cat.items);
  }
  return all;
}

function findItem(id) {
  return getAllItems().find(i => i.id === id);
}

function addItem(id) {
  cart[id] = (cart[id] || 0) + 1;
  showToast(t.added[lang]);
  update();
}

function increaseItem(id) {
  cart[id] = (cart[id] || 0) + 1;
  update();
}

function decreaseItem(id) {
  if (cart[id] > 1) {
    cart[id]--;
  } else {
    delete cart[id];
    showToast(t.removed[lang]);
  }
  update();
}

function removeItem(id) {
  delete cart[id];
  showToast(t.removed[lang]);
  update();
}

function getTotal() {
  let total = 0;
  for (const [id, qty] of Object.entries(cart)) {
    const item = findItem(id);
    if (item) total += item.price * qty;
  }
  return total;
}

function getCartCount() {
  return Object.values(cart).reduce((s, q) => s + q, 0);
}

function update() {
  renderMenu();
  renderDrawer();
  updateBadge();
}

function updateBadge() {
  const badge = document.getElementById("cartBadge");
  const count = getCartCount();
  if (count > 0) {
    badge.style.display = "flex";
    badge.textContent = count;
    badge.classList.add("bump");
    setTimeout(() => badge.classList.remove("bump"), 300);
  } else {
    badge.style.display = "none";
  }
}

// ‚îÄ‚îÄ DRAWER ‚îÄ‚îÄ
function renderDrawer() {
  const body = document.getElementById("drawerBody");
  const entries = Object.entries(cart);
  const sendBtn = document.getElementById("sendBtn");

  if (entries.length === 0) {
    body.innerHTML = `<div class="drawer-empty"><span>üõí</span>${t.emptyCart[lang]}</div>`;
    sendBtn.disabled = true;
    document.getElementById("totalValue").textContent = `0 ${t.currency[lang]}`;
    return;
  }

  sendBtn.disabled = false;
  body.innerHTML = "";

  for (const [id, qty] of entries) {
    const item = findItem(id);
    if (!item) continue;

    const row = document.createElement("div");
    row.className = "cart-item";
    row.innerHTML = `
      <div class="cart-item-info">
        <div class="cart-item-name">${lang === "en" ? item.en : item.ar}</div>
        <div class="cart-item-price">${item.price * qty} ${t.currency[lang]}</div>
      </div>
      <div class="cart-item-qty">
        <button class="qty-btn" onclick="decreaseItem('${id}')">‚àí</button>
        <span class="qty-num">${qty}</span>
        <button class="qty-btn" onclick="increaseItem('${id}')">+</button>
      </div>
      <button class="cart-item-remove" onclick="removeItem('${id}')">üóë</button>
    `;
    body.appendChild(row);
  }

  document.getElementById("totalValue").textContent = `${getTotal()} ${t.currency[lang]}`;
}

function openDrawer() {
  document.getElementById("drawer").classList.add("open");
  document.getElementById("drawerOverlay").classList.add("open");
}
function closeDrawer() {
  document.getElementById("drawer").classList.remove("open");
  document.getElementById("drawerOverlay").classList.remove("open");
}

// ‚îÄ‚îÄ WHATSAPP ‚îÄ‚îÄ
function sendToWhatsApp() {
  const entries = Object.entries(cart);
  if (entries.length === 0) return;

  let lines = [];
  if (lang === "en") {
    lines.push("*New Order from Saffroon Kitchen*\n");
  } else {
    lines.push("*ÿ∑ŸÑÿ® ÿ¨ÿØŸäÿØ ŸÖŸÜ ŸÖÿ∑ÿ®ÿÆ ÿ≤ÿπŸÅÿ±ŸàŸÜ*\n");
  }

  for (const [id, qty] of entries) {
    const item = findItem(id);
    if (!item) continue;
    const name = lang === "en" ? item.en : item.ar;
    lines.push(`- ${name} x${qty} ‚Äî ${item.price * qty} ${t.currency[lang]}`);
  }

  lines.push("");
  if (lang === "en") {
    lines.push(`*Total: ${getTotal()} AED*`);
  } else {
    lines.push(`*ÿßŸÑŸÖÿ¨ŸÖŸàÿπ: ${getTotal()} ÿØ.ÿ•*`);
  }

  const text = encodeURIComponent(lines.join("\n"));
  const url = `https://wa.me/${WHATSAPP_NUMBER}?text=${text}`;
  window.open(url, "_blank");
}

// ‚îÄ‚îÄ LANGUAGE TOGGLE ‚îÄ‚îÄ
function toggleLang() {
  lang = lang === "en" ? "ar" : "en";
  const html = document.documentElement;
  html.setAttribute("dir", lang === "ar" ? "rtl" : "ltr");
  html.setAttribute("lang", lang);

  document.getElementById("brandName").textContent = t.brand[lang];
  document.getElementById("heroTitle").textContent = t.heroTitle[lang];
  document.getElementById("heroSub").textContent = t.heroSub[lang];
  document.getElementById("drawerTitle").textContent = t.drawerTitle[lang];
  document.getElementById("totalLabel").textContent = t.totalLabel[lang];
  document.getElementById("sendBtnText").textContent = t.sendBtn[lang];
  document.getElementById("langBtn").textContent = t.langToggle[lang];

  renderMenu();
  renderDrawer();
}

// ‚îÄ‚îÄ TOAST ‚îÄ‚îÄ
function showToast(msg) {
  const toast = document.getElementById("toast");
  toast.textContent = msg;
  toast.classList.add("show");
  setTimeout(() => toast.classList.remove("show"), 2000);
}

// ‚îÄ‚îÄ INIT ‚îÄ‚îÄ
renderMenu();
renderDrawer();
</script>

</body>
</html>
